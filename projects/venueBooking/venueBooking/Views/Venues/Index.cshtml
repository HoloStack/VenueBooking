@model IEnumerable<venueBooking.Models.Venue>

@{
    ViewData["Title"] = "Venues";
}

<h1>Venues</h1>
<p><a asp-action="Create" class="btn btn-primary">Create New Venue</a></p>

<table id="venuesTable" class="table table-hover">
    <thead>
        <tr>
            <th>Name</th>
            <th>Location</th>
            <th>Capacity</th>
            <th>Image</th>
        </tr>
    </thead>
    <tbody>
    @foreach (var v in Model)
    {
        <tr data-venue-id="@v.VenueId">
            <td>@v.VenueName</td>
            <td>@v.Location</td>
            <td>@v.Capacity</td>
            <td>
                @if (!string.IsNullOrEmpty(v.ImageUrl))
                {
                    <img src="@v.ImageUrl" width="100" alt="@v.VenueName" />
                }
            </td>
        </tr>
    }
    </tbody>
</table>

@section Scripts {
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('#venuesTable tbody tr').forEach(row => {
                row.style.cursor = 'pointer';
                row.addEventListener('dblclick', () => {
                    const id = row.getAttribute('data-venue-id');
                    if (id) {
                        window.location.href = `@Url.Action("Create", "Events")?venueId=${id}`;
                    }
                });
            });
        });
    </script>
}